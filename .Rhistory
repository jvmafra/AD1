geom_histogram(mapping = aes(x = Descricao)) + coord_flip()
maior_valor = agrupa_nome %>% filter(total == max(total))
menor_valor = agrupa_nome %>% filter(total == min(total))
View(maior_valor) #deputado que mais gastou
View(menor_valor) #deputado que menos gastou
View(mean(gastos$Valor_liquido)) #O que cada deputado gasta em média para cada servico solicitado
agrupa_nome = gastos %>%
group_by(Nome) %>%
summarise(total = sum(Valor_liquido))
ggplot(agrupa_nome) +
geom_point(mapping = aes(x = Nome, y = total)) + coord_flip()
View(mean(agrupa_nome$total)) # Em media, quanto os deputados gastam?
ggplot(agrupa_nome) +
geom_histogram(mapping = aes(x = Descricao)) + coord_flip()
maior_valor = agrupa_nome %>% filter(total == max(total))
menor_valor = agrupa_nome %>% filter(total == min(total))
View(maior_valor) #deputado que mais gastou
View(menor_valor) #deputado que menos gastou
View(mean(gastos$Valor_liquido)) #O que cada deputado gasta em média para cada servico solicitado
agrupa_nome = gastos %>%
group_by(Nome) %>%
summarise(total = sum(Valor_liquido))
ggplot(agrupa_nome) +
geom_point(mapping = aes(x = Nome, y = total)) + coord_flip()
View(mean(agrupa_nome$total)) # Em media, quanto os deputados gastam?
maior_valor = agrupa_nome %>% filter(total == max(total))
menor_valor = agrupa_nome %>% filter(total == min(total))
View(maior_valor) #deputado que mais gastou
View(menor_valor) #deputado que menos gastou
View(mean(gastos$Valor_liquido)) #O que cada deputado gasta em média para cada servico solicitado
agrupa_nome = gastos %>%
group_by(Nome) %>%
summarise(total = sum(Valor_liquido))
ggplot(agrupa_nome) +
geom_point(mapping = aes(x = Nome, y = total)) + coord_flip()
View(mean(agrupa_nome$total)) # Em media, quanto os deputados gastam?
maior_valor = agrupa_nome %>% filter(total == max(total))
menor_valor = agrupa_nome %>% filter(total == min(total))
View(maior_valor) #deputado que mais gastou
View(menor_valor) #deputado que menos gastou
View(mean(gastos$Valor_liquido)) #O que cada deputado gasta em média para cada servico solicitado
library(dplyr, warn.conflicts = FALSE)
library(ggplot2)
theme_set(theme_bw())
# carregando dados
ler_gastos <- function(arquivo = "C:/Users/Mafra/Documents/AD1/workspace/AD1/dados/ano-atual.csv"){
#' Lê um csv criado a partir dos dados de gastos dos deputados da
#' Câmara e seta os tipos de colunas mais convenientemente.
#' Versão sem readr, para máquinas onde não é possível instalar esse pacote.
#' É um pouco mais lenta que a com readr.
require("dplyr", warn.conflicts = FALSE)
gastos = read.csv(arquivo, stringsAsFactors = FALSE, comment.char="#")
gastos = gastos %>%
mutate_each(funs(as.factor), sgPartido, sgUF, txNomeParlamentar, indTipoDocumento)
return(gastos)
}
gastos <- ler_gastos()
# Foram observados especialmente os atributos Partido, Nome, Valor Solicitado, Descricao e o Valor Liquido, ou seja, o que de fato foi recebido pelo deputado.
gastos <- gastos %>% select (1, 5, 6, 8, 15, 23)
names(gastos) <- c("Partido", "Nome", "UF", "Valor_solicitado", "Descricao", "Valor_liquido")
gastos <- gastos %>% filter (UF == "PB")
# Foram observados especialmente os atributos Partido, Nome, Valor Solicitado, Descricao e o Valor Liquido, ou seja, o que de fato foi recebido pelo deputado.
gastos <- gastos %>% select (1, 5, 6, 8, 15, 23)
names(gastos) <- c("Partido", "Nome", "UF", "Valor_solicitado", "Descricao", "Valor_liquido")
gastos <- gastos %>% filter (UF == "PB")
library(dplyr, warn.conflicts = FALSE)
library(ggplot2)
theme_set(theme_bw())
# carregando dados
ler_gastos <- function(arquivo = "C:/Users/Mafra/Documents/AD1/workspace/AD1/dados/ano-atual.csv"){
#' Lê um csv criado a partir dos dados de gastos dos deputados da
#' Câmara e seta os tipos de colunas mais convenientemente.
#' Versão sem readr, para máquinas onde não é possível instalar esse pacote.
#' É um pouco mais lenta que a com readr.
require("dplyr", warn.conflicts = FALSE)
gastos = read.csv(arquivo, stringsAsFactors = FALSE, comment.char="#")
gastos = gastos %>%
mutate_each(funs(as.factor), sgPartido, sgUF, txNomeParlamentar, indTipoDocumento)
return(gastos)
}
gastos <- ler_gastos()
# Foram observados especialmente os atributos Partido, Nome, Valor Solicitado, Descricao e o Valor Liquido, ou seja, o que de fato foi recebido pelo deputado.
gastos <- gastos %>% select (1, 5, 6, 8, 15, 23)
names(gastos) <- c("Partido", "Nome", "UF", "Valor_solicitado", "Descricao", "Valor_liquido")
gastos <- gastos %>% filter (UF == "PB")
# Pelo gráfico de barras gerado, observa-se que os servicos mais requisitados pelos parlamentares sao PASSAGENS AEREAS e COMBUSTIVEIS/LUBRIFICANTES, mas não necessariamente os maiores valores gastos são com eles
ggplot(gastos) +
geom_bar(mapping = aes(x = Descricao)) + coord_flip()
# carregando dados
ler_gastos <- function(arquivo = "C:/Users/Mafra/Documents/AD1/workspace/AD1/dados/ano-atual.csv"){
#' L? um csv criado a partir dos dados de gastos dos deputados da
#' C?mara e seta os tipos de colunas mais convenientemente.
#' Vers?o sem readr, para m?quinas onde n?o ? poss?vel instalar esse pacote.
#' ? um pouco mais lenta que a com readr.
require("dplyr", warn.conflicts = FALSE)
gastos = read.csv(arquivo, stringsAsFactors = FALSE, comment.char="#")
gastos = gastos %>%
mutate_each(funs(as.factor), sgPartido, sgUF, txNomeParlamentar, indTipoDocumento)
return(gastos)
}
gastos <- ler_gastos()
library(dplyr, warn.conflicts = FALSE)
library(ggplot2)
theme_set(theme_bw())
# carregando dados
ler_gastos <- function(arquivo = "C:/Users/Mafra/Documents/AD1/workspace/AD1/dados/ano-atual.csv"){
#' L? um csv criado a partir dos dados de gastos dos deputados da
#' C?mara e seta os tipos de colunas mais convenientemente.
#' Vers?o sem readr, para m?quinas onde n?o ? poss?vel instalar esse pacote.
#' ? um pouco mais lenta que a com readr.
require("dplyr", warn.conflicts = FALSE)
gastos = read.csv(arquivo, stringsAsFactors = FALSE, comment.char="#")
gastos = gastos %>%
mutate_each(funs(as.factor), sgPartido, sgUF, txNomeParlamentar, indTipoDocumento)
return(gastos)
}
gastos <- ler_gastos()
# Foram observados especialmente os atributos Partido, Nome, Valor Solicitado, Descricao e o Valor Liquido, ou seja, o que de fato foi recebido pelo deputado.
gastos <- gastos %>% select (1, 5, 6, 8, 15, 23)
names(gastos) <- c("Partido", "Nome", "UF", "Valor_solicitado", "Descricao", "Valor_liquido")
gastos <- gastos %>% filter (UF == "PB")
# Pelo gr?fico de barras gerado, observa-se que os servicos mais requisitados pelos parlamentares sao PASSAGENS AEREAS e COMBUSTIVEIS/LUBRIFICANTES, mas n?o necessariamente os maiores valores gastos s?o com eles
ggplot(gastos) +
geom_bar(mapping = aes(x = Descricao)) + coord_flip()
agrupa_nome = gastos %>%
group_by(Nome) %>%
summarise(total = sum(Valor_liquido))
ggplot(agrupa_nome) +
geom_point(mapping = aes(x = Nome, y = total)) + coord_flip()
View(mean(agrupa_nome$total)) # Em media, quanto os deputados gastam?
maior_valor = agrupa_nome %>% filter(total == max(total))
menor_valor = agrupa_nome %>% filter(total == min(total))
View(maior_valor) #deputado que mais gastou
View(menor_valor) #deputado que menos gastou
View(mean(gastos$Valor_liquido)) #O que cada deputado gasta em m?dia para cada servico solicitado
library(dplyr, warn.conflicts = FALSE)
library(ggplot2)
theme_set(theme_bw())
# carregando dados
ler_gastos <- function(arquivo = "C:/Users/Mafra/Documents/AD1/workspace/AD1/dados/ano-atual.csv"){
#' Lê um csv criado a partir dos dados de gastos dos deputados da
#' Câmara e seta os tipos de colunas mais convenientemente.
#' Versão sem readr, para máquinas onde não é possível instalar esse pacote.
#' É um pouco mais lenta que a com readr.
require("dplyr", warn.conflicts = FALSE)
gastos = read.csv(arquivo, stringsAsFactors = FALSE, encoding="UTF-8")
gastos = gastos %>%
mutate_each(funs(as.factor), sgPartido, sgUF, txNomeParlamentar, indTipoDocumento)
return(gastos)
}
gastos <- ler_gastos()
library(dplyr, warn.conflicts = FALSE)
library(ggplot2)
theme_set(theme_bw())
# carregando dados
ler_gastos <- function(arquivo = "C:/Users/Mafra/Documents/AD1/workspace/AD1/dados/ano-atual.csv"){
#' Lê um csv criado a partir dos dados de gastos dos deputados da
#' Câmara e seta os tipos de colunas mais convenientemente.
#' Versão sem readr, para máquinas onde não é possível instalar esse pacote.
#' É um pouco mais lenta que a com readr.
require("dplyr", warn.conflicts = FALSE)
gastos = read.csv(arquivo, stringsAsFactors = FALSE, encoding='UTF-8')
gastos = gastos %>%
mutate_each(funs(as.factor), sgPartido, sgUF, txNomeParlamentar, indTipoDocumento)
return(gastos)
}
gastos <- ler_gastos()
# Foram observados especialmente os atributos Partido, Nome, Valor Solicitado, Descricao e o Valor Liquido, ou seja, o que de fato foi recebido pelo deputado.
gastos <- gastos %>% select (1, 5, 6, 8, 15, 23)
names(gastos) <- c("Partido", "Nome", "UF", "Valor_solicitado", "Descricao", "Valor_liquido")
gastos <- gastos %>% filter (UF == "PB")
# Pelo gráfico de barras gerado, observa-se que os servicos mais requisitados pelos parlamentares sao PASSAGENS AEREAS e COMBUSTIVEIS/LUBRIFICANTES, mas não necessariamente os maiores valores gastos são com eles
ggplot(gastos) +
geom_bar(mapping = aes(x = Descricao)) + coord_flip()
agrupa_nome = gastos %>%
group_by(Nome) %>%
summarise(total = sum(Valor_liquido))
ggplot(agrupa_nome) +
geom_point(mapping = aes(x = Nome, y = total)) + coord_flip()
View(mean(agrupa_nome$total)) # Em media, quanto os deputados gastam?
maior_valor = agrupa_nome %>% filter(total == max(total))
menor_valor = agrupa_nome %>% filter(total == min(total))
View(maior_valor) #deputado que mais gastou
View(menor_valor) #deputado que menos gastou
View(mean(gastos$Valor_liquido)) #O que cada deputado gasta em média para cada servico solicitado
library(dplyr, warn.conflicts = FALSE)
library(ggplot2)
library(knitr)
theme_set(theme_bw())
#Carregando os arquivos dos gastos e das cotas por estado
ler_gastos <- function(arquivo){
require("dplyr", warn.conflicts = FALSE)
gastos = read.csv(arquivo, stringsAsFactors = FALSE, encoding='UTF-8')
return(gastos)
}
gastos <- ler_gastos("dados/ano-atual.csv")
gastos = gastos %>%
mutate_each(funs(as.factor), sgPartido, sgUF, txNomeParlamentar, indTipoDocumento)
gastos <- gastos %>% select (1, 5, 6, 15, 23)
names(gastos) <- c("Partido", "Nome", "UF", "Tipo_despesa", "Valor_liquido")
bancada <- ler_gastos("dados/bancada.csv")
setwd("~/AD1/workspace/AD1")
#Carregando os arquivos dos gastos e das cotas por estado
ler_gastos <- function(arquivo){
require("dplyr", warn.conflicts = FALSE)
gastos = read.csv(arquivo, stringsAsFactors = FALSE, encoding='UTF-8')
return(gastos)
}
gastos <- ler_gastos("dados/ano-atual.csv")
gastos = gastos %>%
mutate_each(funs(as.factor), sgPartido, sgUF, txNomeParlamentar, indTipoDocumento)
gastos <- gastos %>% select (1, 5, 6, 15, 23)
names(gastos) <- c("Partido", "Nome", "UF", "Tipo_despesa", "Valor_liquido")
bancada <- ler_gastos("dados/bancada.csv")
agrupa_partido <- gastos %>% group_by(Partido) %>% summarise(total = sum(Valor_liquido))
partidos <- merge(agrupa_partido, bancada)
ggplot(partidos, aes(x= Partido, y = total/Numero)) + geom_bar(stat = "identity") + coord_flip() + ylab("Média de gasto por deputado") + xlab("Partido")
ggplot(partidos, aes(x = Partido, y = total/Numero)) + geom_point() + coord_flip()
agrupa_nome <- gastos %>% group_by(Nome, Partido) %>% summarise(total = sum(Valor_liquido))
ggplot(agrupa_nome, aes(x = Partido, y = total)) + geom_point() + coord_flip()
agrupa.partido = partidos %>%
group_by(Partido)
ggplot(agrupa.partido, aes(x = reorder(Partido, total), total)) +
geom_boxplot() +
xlab("Estados") +
ylab("Valor Liquido") +
ggtitle("Distribuição de Divulgação de Atividade Parlamentar por estado") +
geom_point(position = position_jitter(width = .2), alpha = .07)
#Nova pergunta: Analisar fornecedores dos gastos com atividade parlamentar
# Analisar deputados que mais gastam nas coisas menos comuns
agrupa.partido = partidos %>%
group_by(Partido)
ggplot(agrupa.partido, aes(x = reorder(Partido, total/1e6), total/1e6)) + coord_flip() +
geom_boxplot() +
xlab("Estados") +
ylab("Valor Liquido") +
ggtitle("Distribuição de Divulgação de Atividade Parlamentar por estado") +
geom_point(position = position_jitter(width = .2), alpha = .07)
ggplot(agrupa_nome, aes(x = reorder(Partido, total/1e6), total/1e6)) + coord_flip() +
geom_boxplot() +
xlab("Estados") +
ylab("Valor Liquido") +
ggtitle("Distribuição de Divulgação de Atividade Parlamentar por estado") +
geom_point(position = position_jitter(width = .2), alpha = .07)
ggplot(agrupa_nome, aes(x = reorder(Partido, total), total)) + coord_flip() +
geom_boxplot() +
xlab("Estados") +
ylab("Valor Liquido") +
ggtitle("Distribuição de Divulgação de Atividade Parlamentar por estado") +
geom_point(position = position_jitter(width = .2), alpha = .07)
agrupa_nome <- gastos %>% group_by(Nome, Partido) %>% summarise(total = sum(Valor_liquido))
ggplot(agrupa_nome, aes(x = Partido, y = total)) + geom_point() + coord_flip()
ggplot(agrupa_nome, aes(x = Partido, y = total/1e5)) + geom_point() + coord_flip()
ggplot(agrupa_nome, aes(x = Partido, y = total/1e3)) + geom_point() + coord_flip()
ggplot(partidos, aes(x = Partido, y = total/Numero)) + geom_point() + coord_flip()
ggplot(partidos, aes(x= Partido, y = total/Numero)) + geom_bar(stat = "identity") + coord_flip() + ylab("Média do gasto por deputado do partido") + xlab("Partido")
agrupa_nome <- gastos %>% group_by(Nome, Partido) %>% summarise(total = sum(Valor_liquido))
ggplot(agrupa_nome, aes(x = Partido, y = total/1e3)) + geom_point() + coord_flip()
summary(agrupa_partido)
summary(agrupa_partido$total)
View (agrupa.partido)
ggplot(agrupa_nome, aes(x = Partido, y = total)) + geom_point() + coord_flip()
ggplot(partidos, aes(x = Partido, y = total/Numero/1e3)) + geom_point() + coord_flip()
ggplot(agrupa_nome, aes(x = Partido, y = total/1e3)) + geom_point() + coord_flip()
ggplot(agrupa_nome, aes(x = Partido, y = total/1e3)) + geom_point() + coord_flip()
+ ggtitle("Distribuição dos gastos dos deputados por partido") + xlab("Partido") + ylab("Valor gasto (em mil reais)")
ggplot(agrupa_nome, aes(x = Partido, y = total/1e3))
+ geom_point()
+ coord_flip()
+ ggtitle("Distribuição dos gastos dos deputados por partido")
+ xlab("Partido")
+ ylab("Valor gasto (em mil reais)")
ggplot(agrupa_nome, aes(x = Partido, y = total/1e3))
+ geom_point()
+ coord_flip()
+ xlab("Partido")
+ ylab("Valor gasto (em mil reais)")
ggplot(agrupa_nome, aes(x = Partido, y = total/1e3))
+ geom_point()
+ coord_flip()
+ xlab("Partido")
+ ylab("Valor gasto")
ggplot(agrupa_nome, aes(x = Partido, y = total/1e3))
+ geom_point()
+ coord_flip()
+ xlab("Partido")
ggplot(agrupa_nome, aes(x = Partido, y = total/1e3))
+ geom_point()
+ coord_flip()
ggplot(agrupa_nome, aes(x = Partido, y = total/1e3)) + geom_point() + coord_flip()
ggplot(agrupa_nome, aes(x = Partido, y = total/1e3)) + geom_point() + coord_flip() + xlab("Partido")
ggplot(agrupa_nome, aes(x = Partido, y = total/1e3)) + geom_point() + coord_flip() + xlab("Partido") + ylab("Valor gasto (em mil reais)")
ggplot(agrupa_nome, aes(x = Partido, y = total/1e3)) + geom_point() + coord_flip() + xlab("Partido") + ylab("Valor gasto (em mil reais)") + ggtitle("Distribuição dos gastos dos deputados por partido")
View(agrupa_partido)
ggplot(partidos, aes(x= Partido, y = total/Numero, fill = Partido)) + geom_bar(stat = "identity") + coord_flip() + ylab("Média do gasto por deputado do partido") + xlab("Partido")
ggplot(agrupa_nome, aes(x = Partido, y = total/1e3, fill = Partido)) + geom_point() + coord_flip() + xlab("Partido") + ylab("Valor gasto (em mil reais)") + ggtitle("Distribuição dos gastos dos deputados por partido")
ggplot(agrupa_nome, aes(x = Partido, y = total/1e3)) + geom_point() + coord_flip() + xlab("Partido") + ylab("Valor gasto (em mil reais)") + ggtitle("Distribuição dos gastos dos deputados por partido")
library(dplyr, warn.conflicts = FALSE)
library(ggplot2)
library(knitr)
theme_set(theme_bw())
#Carregando os arquivos dos gastos e das cotas por estado
ler_gastos <- function(arquivo){
require("dplyr", warn.conflicts = FALSE)
gastos = read.csv(arquivo, stringsAsFactors = FALSE, encoding='UTF-8')
return(gastos)
}
gastos <- ler_gastos("dados/ano-atual.csv")
gastos = gastos %>%
mutate_each(funs(as.factor), sgPartido, sgUF, txNomeParlamentar, indTipoDocumento)
gastos <- gastos %>% select (1, 5, 6, 15, 23)
names(gastos) <- c("Partido", "Nome", "UF", "Tipo_despesa", "Valor_liquido")
bancada <- ler_gastos("dados/bancada.csv")
agrupa_partido <- gastos %>% group_by(Partido) %>% summarise(total = sum(Valor_liquido))
linhas =
agrupa_partido <- agrupa_partido %>% select()
summary(agrupa_partido$total)
partidos <- merge(agrupa_partido, bancada)
ggplot(partidos, aes(x= Partido, y = total/Numero, fill = Partido)) + geom_bar(stat = "identity") + coord_flip() + ylab("Média do gasto por deputado do partido") + xlab("Partido")
ggplot(partidos, aes(x = Partido, y = total/Numero)) + geom_point() + coord_flip()
agrupa_nome <- gastos %>% group_by(Nome, Partido) %>% summarise(total = sum(Valor_liquido))
ggplot(agrupa_nome, aes(x = Partido, y = total/1e3)) + geom_point() + coord_flip() + xlab("Partido") + ylab("Valor gasto (em mil reais)") + ggtitle("Distribuição dos gastos dos deputados por partido")
#Nova pergunta: Analisar fornecedores dos gastos com atividade parlamentar
# Analisar deputados que mais gastam nas coisas menos comuns
agrupa_partido <- gastos %>% group_by(Partido) %>% summarise(total = sum(Valor_liquido))
linhas = c(1,2,3,4,5,6,7,8,9,10,11,1,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28)
agrupa_partido <- agrupa_partido[linhas, ]
View(agrupa_partido)
partidos <- merge(agrupa_partido, bancada)
View(partidos)
summary(agrupa_partido$total)
View(agrupa_partido)
teste <- gastos %>% filter (Partido == "PRTB")
View(teste)
gastos <- ler_gastos("dados/ano-atual.csv")
teste <- gastos %>% filter (Partido == "PRTB")
View(gastos)
teste <- gastos %>% filter (sgPartido == "PRTB")
View(teste)
#Carregando os arquivos dos gastos e das cotas por estado
ler_gastos <- function(arquivo){
require("dplyr", warn.conflicts = FALSE)
gastos = read.csv(arquivo, stringsAsFactors = FALSE, encoding='UTF-8')
return(gastos)
}
gastos <- ler_gastos("dados/ano-atual.csv")
gastos = gastos %>%
mutate_each(funs(as.factor), sgPartido, sgUF, txNomeParlamentar, indTipoDocumento)
gastos <- gastos %>% select (1, 5, 6, 15, 23)
names(gastos) <- c("Partido", "Nome", "UF", "Tipo_despesa", "Valor_liquido")
bancada <- ler_gastos("dados/bancada.csv")
agrupa_partido <- gastos %>% group_by(Partido) %>% summarise(total = sum(Valor_liquido))
linhas = c(1,2,3,4,5,6,7,8,9,10,11,1,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28)
agrupa_partido <- agrupa_partido[linhas, ]
summary(agrupa_partido$total)
partidos <- merge(agrupa_partido, bancada)
ggplot(partidos, aes(x= Partido, y = total/Numero, fill = Partido)) + geom_bar(stat = "identity") + coord_flip() + ylab("Média do gasto por deputado do partido") + xlab("Partido")
ggplot(partidos, aes(x = Partido, y = total/Numero)) + geom_point() + coord_flip()
agrupa_nome <- gastos %>% group_by(Nome, Partido) %>% summarise(total = sum(Valor_liquido))
ggplot(agrupa_nome, aes(x = Partido, y = total/1e3)) + geom_point() + coord_flip() + xlab("Partido") + ylab("Valor gasto (em mil reais)") + ggtitle("Distribuição dos gastos dos deputados por partido")
#Nova pergunta: Analisar fornecedores dos gastos com atividade parlamentar
# Analisar deputados que mais gastam nas coisas menos comuns
summary(agrupa_partido$total)
ggplot(partidos, aes(x= Partido, y = total/Numero, fill = Partido)) + geom_bar(stat = "identity") + coord_flip() + ylab("Média do gasto por deputado do partido") + xlab("Partido")
agrupa_partido <- gastos %>% group_by(Partido) %>% summarise(total = sum(Valor_liquido))
summary(agrupa_partido$total)
partidos <- merge(agrupa_partido, bancada)
ggplot(partidos, aes(x= Partido, y = total/Numero, fill = Partido)) + geom_bar(stat = "identity") + coord_flip() + ylab("Média do gasto por deputado do partido") + xlab("Partido")
ggplot(partidos, aes(x = Partido, y = total/Numero)) + geom_point() + coord_flip()
agrupa_nome <- gastos %>% group_by(Nome, Partido) %>% summarise(total = sum(Valor_liquido))
ggplot(agrupa_nome, aes(x = Partido, y = total/1e3)) + geom_point() + coord_flip() + xlab("Partido") + ylab("Valor gasto (em mil reais)") + ggtitle("Distribuição dos gastos dos deputados por partido")
#Nova pergunta: Analisar fornecedores dos gastos com atividade parlamentar
# Analisar deputados que mais gastam nas coisas menos comuns
summary(agrupa_partido$total)
View(agrupa_partido)
agrupa_partido <- gastos %>% group_by(Partido) %>% summarise(total = sum(Valor_liquido))
summary(agrupa_partido$total)
agrupa_partido <- gastos %>% group_by(Partido) %>% summarise(total = sum(Valor_liquido))
summary(agrupa_partido$total)
partidos <- merge(agrupa_partido, bancada)
ggplot(partidos, aes(x= Partido, y = total/Numero, fill = Partido)) + geom_bar(stat = "identity") + coord_flip() + ylab("Média do gasto por deputado do partido") + xlab("Partido")
ggplot(partidos, aes(x = Partido, y = total/Numero)) + geom_point() + coord_flip()
ggplot(partidos, aes(x= Partido, y = total/Numero, fill = Partido)) + geom_bar(stat = "identity") + coord_flip() + ylab("Média do gasto por deputado do partido") + xlab("Partido")
max(agrupa_partido$total/agrupa_partido$Numero)
View(agrupa_partido)
agrupa_nome <- gastos %>% group_by(Nome, Partido) %>% summarise(total = sum(Valor_liquido))
ggplot(agrupa_nome, aes(x = Partido, y = total/1e3)) + geom_point() + coord_flip() + xlab("Partido") + ylab("Valor gasto (em mil reais)") + ggtitle("Distribuição dos gastos dos deputados por partido")
partidos.estados <- gastos %>% group_by(Partido, UF) %>% summarise(total = sum(Valor_liquido))
View(partidos.estados)
partidos.estados <- gastos %>% filter (Partido == "PRB") %>% group_by(UF) %>% summarise(
total = sum(Valor_liquido)
)
View(partidos.estados)
partidos.estados <- gastos %>% filter (Partido == "PRB") %>% group_by(UF)
View(partidos.estados)
partidos.prb <- gastos %>% filter (Partido == "PRB")
ggplot(partidos.prb, aes(x= UF, fill = Partido)) + geom_bar(stat = "identity") + coord_flip()
ggplot(partidos.prb) + geom_bar(aes(x= UF, fill = Partido)) + coord_flip()
partidos.prb <- gastos %>% filter (Partido == "PRB") %>% group_by(UF)
ggplot(partidos.prb) + geom_bar(aes(x= UF, fill = Partido)) + coord_flip()
partidos.prb <- gastos %>% filter (Partido == "PRB") %>% group_by(UF) %>% summarise(total = sum(Valor_liquido))
ggplot(partidos.prb) + geom_bar(aes(x= UF, fill = Partido)) + coord_flip()
partidos.prb <- gastos %>% filter (Partido == "PRB") %>% group_by(UF) %>% summarise(total = sum(Valor_liquido))
ggplot(partidos.prb) + geom_bar(aes(x= UF, fill = Partido)) + coord_flip()
partidos.prb <- gastos %>% filter (Partido == "PRB") %>% group_by(UF) %>% summarise(total = sum(Valor_liquido))
ggplot(partidos.prb) + geom_bar(aes(x= UF, fill = UF)) + coord_flip()
View(partidos.prb)
partidos.prb <- gastos %>% filter (Partido == "PRB") %>% group_by(Nome) %>% summarise(total = sum(Valor_liquido))
ggplot(partidos.prb) + geom_bar(aes(x= UF, fill = UF)) + coord_flip()
partidos.prb <- gastos %>% filter (Partido == "PRB") %>% group_by(UF) %>% summarise(total = sum(Valor_liquido))
ggplot(partidos.prb) + geom_bar(aes(x= UF, fill = UF)) + coord_flip()
partidos.prb <- gastos %>% filter (Partido == "PRB") %>% group_by(Nome, UF) %>% summarise(total = sum(Valor_liquido))
ggplot(partidos.prb) + geom_bar(aes(x= UF, fill = UF)) + coord_flip()
cotas <- ler_gastos("dados/valor-cota-por-estado")
cotas <- ler_gastos("dados/valor-cota-por-estado.csv")
View(cotas)
partidos.prb <- gastos %>% filter (Partido == "PRB") %>% group_by(Nome, UF) %>% summarise(total = sum(Valor_liquido))
ggplot(partidos.prb) + geom_bar(aes(x= UF, fill = UF)) + coord_flip() + xlab("Estado") + xlab("Numero de deputados") + ggtitle("Deputados do PRB por estado")
partidos.prb <- gastos %>% filter (Partido == "PRB") %>% group_by(Nome, UF) %>% summarise(total = sum(Valor_liquido))
ggplot(partidos.prb) + geom_bar(aes(x= UF, fill = UF)) + coord_flip() + xlab("Estado") + ylab("Numero de deputados") + ggtitle("Deputados do PRB por estado")
agrupa_nome <- gastos %>% group_by(Nome, Partido) %>% summarise(total = sum(Valor_liquido))
ggplot(agrupa_nome, aes(x = Partido, y = total/1e3)) + geom_point(colour="slateblue4") + coord_flip() + xlab("Partido") + ylab("Valor gasto (em mil reais)") + ggtitle("Distribuição dos gastos dos deputados por partido")
gastos_pb <- gastos %>% filter (UF == "PB")
agrupa_tipo <- gastos_pb %>% group_by(Descricao) %>% summarise(total = sum(Valor_liquido))
gastos_pb <- gastos %>% filter (UF == "PB")
agrupa_tipo <- gastos_pb %>% group_by(Tipo_despesa) %>% summarise(total = sum(Valor_liquido))
gastos_pb <- gastos %>% filter (UF == "PB")
agrupa_tipo <- gastos_pb %>% group_by(Tipo_despesa) %>% summarise(total = sum(Valor_liquido))
ggplot(agrupa_tipo, aes(x= Tipo_despesa, y = total)) + geom_bar(stat = "identity") + coord_flip() + ylab("Total gasto") + xlab("Tipo de despesa")
View(gastos)
pedro <- gastos %>% filter (Nome == "PEDRO CUNHA LIMA")
View(pedro)
gastos <- ler_gastos("dados/ano-atual.csv")
pedro <- gastos %>% filter (Nome == "PEDRO CUNHA LIMA")
View(gastos)
pedro <- gastos %>% filter (txNomeParlamentar == "PEDRO CUNHA LIMA")
View(pedro)
gastos.assinatura <- gastos_pb %>% filter(Tipo_despesa == "ASSINATURA DE PUBLICAÇÕES")
View(gastos.assinatura)
gastos.assinatura <- gastos_pb %>% filter(Tipo_despesa == "ASSINATURA DE PUBLICAÇÕES")
gastos.seguranca <- gastos_pb %>% filter (Tipo_despesa == "SERVIÇO DE SEGURANÇA PRESTADO POR EMPRESA ESPECIALIZADA")
View(gastos.seguranca)
gastos.seguranca <- gastos_pb %>% filter (Tipo_despesa == "SERVIÇO DE SEGURANÇA PRESTADO POR EMPRESA ESPECIALIZADA.")
View(gastos.seguranca)
gastos.hospedagem <- gastos_pb %>% filter (Tipo_despesa == "HOSPEDAGEM ,EXCETO DO PARLAMENTAR NO DISTRITO FEDERAL.")
View(gastos.hospedagem)
gastos <- ler_gastos("dados/ano-atual.csv")
View(gastos)
#Carregando os arquivos dos gastos e das cotas por estado
ler_gastos <- function(arquivo){
require("dplyr", warn.conflicts = FALSE)
gastos = read.csv(arquivo, stringsAsFactors = FALSE, encoding='UTF-8')
return(gastos)
}
gastos <- ler_gastos("dados/ano-atual.csv")
gastos = gastos %>%
mutate_each(funs(as.factor), sgPartido, sgUF, txNomeParlamentar, indTipoDocumento)
gastos <- gastos %>% select (1, 5, 6, 15,18, 23)
names(gastos) <- c("Partido", "Nome", "UF", "Tipo_despesa","Fornecedor", "Valor_liquido")
bancada <- ler_gastos("dados/bancada.csv")
cotas <- ler_gastos("dados/valor-cota-por-estado.csv")
gastos.seguranca <- gastos_pb %>% filter (Tipo_despesa == "SERVIÇO DE SEGURANÇA PRESTADO POR EMPRESA ESPECIALIZADA.")
View(gastos.seguranca)
library(dplyr, warn.conflicts = FALSE)
library(ggplot2)
library(knitr)
theme_set(theme_bw())
gastos_pb <- gastos %>% filter (UF == "PB")
agrupa_tipo <- gastos_pb %>% group_by(Tipo_despesa) %>% summarise(total = sum(Valor_liquido))
ggplot(agrupa_tipo, aes(x= Tipo_despesa, y = total)) + geom_bar(stat = "identity") + coord_flip() + ylab("Total gasto") + xlab("Tipo de despesa")
gastos.seguranca <- gastos_pb %>% filter (Tipo_despesa == "SERVIÇO DE SEGURANÇA PRESTADO POR EMPRESA ESPECIALIZADA.")
gastos.hospedagem <- gastos_pb %>% filter (Tipo_despesa == "HOSPEDAGEM ,EXCETO DO PARLAMENTAR NO DISTRITO FEDERAL.")
gastos.atividade <- gastos_pb %>% filter(Tipo_despesa == "DIVULGAÇÃO DA ATIVIDADE PARLAMENTAR.")
View(gastos)
gastos_pb <- gastos %>% filter (UF == "PB")
agrupa_tipo <- gastos_pb %>% group_by(Tipo_despesa) %>% summarise(total = sum(Valor_liquido))
ggplot(agrupa_tipo, aes(x= Tipo_despesa, y = total)) + geom_bar(stat = "identity") + coord_flip() + ylab("Total gasto") + xlab("Tipo de despesa")
gastos.seguranca <- gastos_pb %>% filter (Tipo_despesa == "SERVIÇO DE SEGURANÇA PRESTADO POR EMPRESA ESPECIALIZADA.")
gastos.hospedagem <- gastos_pb %>% filter (Tipo_despesa == "HOSPEDAGEM ,EXCETO DO PARLAMENTAR NO DISTRITO FEDERAL.")
gastos.atividade <- gastos_pb %>% filter(Tipo_despesa == "DIVULGAÇÃO DA ATIVIDADE PARLAMENTAR.")
View(gastos.seguranca)
View(gastos.hospedagem)
gastos.atividade <- gastos_pb %>% filter(Tipo_despesa == "DIVULGAÇÃO DA ATIVIDADE PARLAMENTAR.")
View(gastos.atividade)
gastos.seguranca <- gastos_pb %>% filter (Tipo_despesa == "SERVIÇO DE SEGURANÇA PRESTADO POR EMPRESA ESPECIALIZADA.")
summary(gastos.seguranca)
summary(gastos.seguranca$Nome)
gastos_pb <- gastos %>% filter (UF == "PB")
gastos.seguranca <- gastos_pb %>% filter (Tipo_despesa == "SERVIÇO DE SEGURANÇA PRESTADO POR EMPRESA ESPECIALIZADA.")
summary(gastos.seguranca$Nome)
ggplot(gastos.seguranca) + geom_point(aes(x = Nome, y = gastos.seguranca$Fornecedor))
ggplot(gastos.seguranca) + geom_point(aes(x = Nome, y = gastos.seguranca$Fornecedor))
+ xlab("Deputado") + ylab("Empresa especializada")
ggplot(gastos.seguranca) + geom_point(aes(x = Nome, y = gastos.seguranca$Fornecedor)) + coord_flip() + xlab("Deputado") + ylab("Empresa especializada")
ggplot(gastos.seguranca) + geom_point(aes(x = Nome, y = gastos.seguranca$Valor_liquido)) + coord_flip() + xlab("Deputado") + ylab("Empresa especializada")
View(gastos.seguranca)
ggplot(gastos.hospedagem) + geom_point(aes(x = Fornecedor, y = Valor_liquido, fill = Nome))
ggplot(gastos.hospedagem) + geom_point(aes(x = Fornecedor, y = Valor_liquido, fill = Nome)) + coord_flip()
ggplot(gastos.hospedagem) + geom_point(aes(x = Fornecedor, y = Valor_liquido, colour = Nome)) + coord_flip()
ggplot(gastos.hospedagem) + geom_point(size = 3, aes(x = Fornecedor, y = Valor_liquido, colour = Nome)) + coord_flip() + xlab("Fornecedor") + ylab("Valor gasto") + ggtitle("Gastos dos deputados praibanos com hospedagem")
ggplot(gastos.hospedagem) + geom_point(size = 2, aes(x = Fornecedor, y = Valor_liquido, colour = Nome)) + coord_flip() + xlab("Fornecedor") + ylab("Valor gasto") + ggtitle("Gastos dos deputados praibanos com hospedagem")
gastos.atividade <- gastos_pb %>% filter(Tipo_despesa == "DIVULGAÇÃO DA ATIVIDADE PARLAMENTAR.")
ggplot(gastos.atividade) + geom_point(size = 2, aes(x = Fornecedor, y = Valor_liquido, colour = Nome)) + coord_flip() + xlab("Fornecedor") + ylab("Valor gasto (em reais)") + ggtitle("Gastos dos deputados paraibanos com hospedagem")
summary(gastos.atividade$Valor_liquido)
gastos.atividade <- gastos_pb %>% filter(Tipo_despesa == "DIVULGAÇÃO DA ATIVIDADE PARLAMENTAR.")
ggplot(gastos.atividade) + geom_point(size = 2, aes(x = Fornecedor, y = Valor_liquido, colour = Nome)) + coord_flip() + xlab("Fornecedor") + ylab("Valor gasto (em reais)") + ggtitle("Gastos dos deputados paraibanos com divulgação da atividade")
summary(gastos.atividade$Valor_liquido)
gastos.atividade <- gastos_pb %>% filter(Tipo_despesa == "DIVULGAÇÃO DA ATIVIDADE PARLAMENTAR.")
ggplot(gastos.atividade) + geom_point(size = 2, aes(x = Fornecedor, y = Valor_liquido, colour = Nome)) + coord_flip() + xlab("Fornecedor") + ylab("Valor gasto (em reais)") + ggtitle("Gastos dos deputados paraibanos com divulgação da atividade")
summary(gastos.atividade$Valor_liquido)
gastos.atividade <- gastos_pb %>% filter(Tipo_despesa == "DIVULGAÇÃO DA ATIVIDADE PARLAMENTAR.")
ggplot(gastos.atividade) + geom_point(size = 2, aes(x = Fornecedor, y = Valor_liquido, colour = Nome)) + coord_flip() + xlab("Fornecedor") + ylab("Valor gasto (em reais)") + ggtitle("Gastos dos deputados paraibanos com divulgação da atividade")
